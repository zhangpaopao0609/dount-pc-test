<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="apple-touch-icon" href="/pwa-192x192.png" />
  <link rel="mask-icon" href="/safari-pinned-tab.svg" color="#00aba9" />
  <meta name="msapplication-TileColor" content="#00aba9" />
  <script>
    ; (function () {
      const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
      const setting = localStorage.getItem('vueuse-color-scheme') || 'auto'
      if (setting === 'dark' || (prefersDark && setting !== 'light'))
        document.documentElement.classList.toggle('dark', true)
    })()
  </script>
</head>

<body class="font-sans">
  <div id="app"></div>
  <script type="module" src="/src/main.ts"></script>
  <noscript> This website requires JavaScript to function properly. Please enable JavaScript to continue. </noscript>
  <script type="text/javascript" src="https://res.wx.qq.com/open/js/jweixin-1.3.2.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/eruda"></script>
  <script>
    eruda.init()
  </script>
  <script>
      (function () {
        'use strict';

        const SCRIPT_URLs = [
          './js/dist/index.web.js',
        ];
        const param = {
          maskMode: 'no-mask', // 隐私策略, all-mask 或 no-mask, 详见：https://developers.weixin.qq.com/miniprogram/analysis/experience/sdk/privacy.html
          recordCanvas: false,  // 若要采集canvas, 设为true
          projectId: 'wxb77dab8a07ebd60e-1ffbh7oOk-Dr95Pa', // 项目 ID，需替换为体验分析项目 ID
          iframe: false, // 是否采集 iframe 页面
          console: true, // 是否采集 console 输出的错误日志
          network: true, // 是否采集网络错误
        };
        function loadScript(url) {
          return new Promise((resolve, reject) => {
            const scriptEle = document.createElement('script');
            scriptEle.type = 'text/javascript';
            scriptEle.async = true;
            scriptEle.src = url;
            scriptEle.onload = () => {
              resolve(url);
            };
            scriptEle.onerror = () => {
              reject(new Error('Script load error'));
            };
            document.head.appendChild(scriptEle);
          });
        }
        async function main() {
          try {
            sessionStorage.setItem('wxobs_start_timestamp', String(Date.now()));
            const fastestUrl = await Promise.race(SCRIPT_URLs.map(url => loadScript(url)));
            window.__startPX && window.__startPX(param);
          }
          catch (error) {
            console.error('Error loading scripts:', error);
          }
        }
        main();

      })();
  </script>
</body>

</html>
